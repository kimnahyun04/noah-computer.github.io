<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <title>Noah's Internet Quest</title>
  <style>
    html, body {
      margin: 0;
      width: 100vw;
      height: 100vh;
      background: #0b0f1a;
      overflow: hidden;
    }

    /* ============================
       ğŸŸ¦ 16:9 ê³ ì • ê²Œì„í™”ë©´
    ============================ */
    .game-container {
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #0b0f1a;
    }

    .game-area {
      position: relative;
      width: calc(100vh * (16 / 9)); /* ì„¸ë¡œ ê¸°ì¤€ */
      height: 100vh;

      max-width: 100vw; /* ê°€ë¡œ ê¸°ì¤€ í™”ë©´ì¼ ê²½ìš° ëŒ€ì‘ */
      max-height: calc(100vw * (9 / 16));

      overflow: hidden;
      position: relative;
    }

    /* ============================
       ğŸŸ§ ì „ì²´ ê²Œì„ ì˜ì—­
    ============================ */
    .stage {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .background, .eat-scene {
      width: 100%;
      height: 100%;
      object-fit: contain;
      image-rendering: pixelated;
      position: absolute;
      top: 0;
      left: 0;
      transition: opacity 1.5s ease;
    }

    .eat-scene {
      opacity: 0;
      z-index: 2;
    }

    .eat-scene.show {
      opacity: 1;
    }

    /* ì•„ì´ì½˜ */
    .icon {
      position: absolute;
      width: 7%;
      image-rendering: pixelated;
      transition: transform 0.2s ease, filter 0.2s ease;
      filter: drop-shadow(-0.4vw -0.4vh 0 #131313);
      cursor: pointer;
      z-index: 5;
    }

    .icon:hover {
      transform: scale(1.1);
      filter: drop-shadow(0 0 0.6vw rgba(255, 255, 255, 0.9));
    }

    /* ê° ì•„ì´ì½˜ ìœ„ì¹˜ */
    .internet { top: 7%; left: 6%; }
    .mail { top: 20%; left: 6%; }
    .folder { top: 33%; left: 6%; }
    .trash { top: 46%; left: 6%; }
    .game { top: 59%; left: 5%; width: 9%; }
    .music-icon { top: 73%; left: 6%; }

    /* ëˆˆì•Œ */
    .eye-wrapper {
      position: absolute;
      width: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 3;
    }

    .eye {
      width: 100%;
      height: auto;
      image-rendering: pixelated;
      transition: transform 0.05s linear;
    }

    /* ìë§‰ */
    #subtitle {
      position: absolute;
      bottom: 5%;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'DungGeunMo', sans-serif;
      color: white;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid white;
      border-radius: 10px;
      padding: 1vh 2vw;
      font-size: 2.2vh;
      text-align: center;
      z-index: 999;
      display: none;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .next-indicator {
      font-size: 1.8vh;
      color: #ffcc00;
      margin-left: 1vw;
      animation: blink 1s infinite alternate;
    }

    @keyframes blink {
      from { opacity: 0.3; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>

  <div class="game-container">
    <div class="game-area">
      <div class="stage">
        <div id="subtitle"></div>

        <!-- ë°°ê²½ -->
        <img class="background" src="./ì›¹ë””ë°°ê²½.gif" alt="ë°°ê²½ ì´ë¯¸ì§€" />
        <audio id="bgPeace" src="./ë°°ê²½ìŒ.mp3" preload="auto" loop></audio>
        <audio id="nextSound" src="./ë‹¤ìŒ í´ë¦­.mp3" preload="auto"></audio>


        <!-- ë¨¹ëŠ” ì¥ë©´ -->
        <audio id="hungrySound" src="./ë°°ê³ í””.mp4" preload="auto"></audio>
        <audio id="eatSound" src="./ë¨¹ëŠ”ì†Œë¦¬.mp4" preload="auto"></audio>
        <img class="eat-scene" id="eatScene" src="./ë…¸ì•„ ë°¥ë¨¹ìŒ.gif" />

        <!-- ì•„ì´ì½˜ -->
        <img class="icon internet" src="./ì¸í„°ë„· ë¡œê³ .png" />
        <img class="icon mail" src="./ë©”ì„¸ì§€ ì•„ì´ì½˜.png" />
        <img class="icon folder" src="./í´ë” ì•„ì´ì½˜.png" />
        <img class="icon trash" src="./ì“°ë ˆê¸°í†µ.png" />
        <img class="icon game" src="./ë¶ˆë²•ê²Œì„ ì•„ì´ì½˜.png" />
        <img class="icon music-icon" src="./ìŒì•…ì•„ì´ì½˜.png" />

        <!-- ëˆˆ -->
        <div class="eye-wrapper" id="eyeWrapper">
          <img class="eye" id="eye" src="./ëˆˆì•Œ.png" />
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== ì›€ì§ì´ëŠ” ëˆˆ =====
    const eye = document.getElementById("eye");
    const eyeWrapper = document.getElementById("eyeWrapper");
    function updateEyePosition(e) {
      const rect = eyeWrapper.getBoundingClientRect();
      const cX = rect.left + rect.width / 2;
      const cY = rect.top + rect.height / 2;
      const dx = e.clientX - cX;
      const dy = e.clientY - cY;
      const max = rect.width * 0.005;
      const mx = Math.max(Math.min(dx / 20, max), -max);
      const my = Math.max(Math.min(dy / 20, max), -max);
      eye.style.transform = `translate(${mx}px, ${my}px)`;
    }
    window.addEventListener("mousemove", updateEyePosition);
    window.addEventListener("resize", () => eye.style.transform = "translate(0, 0)");

    // ===== ë°°ê²½ìŒì•… í† ê¸€ =====
    const musicIcon = document.querySelector(".icon.music-icon");
    const bgm = document.getElementById("bgMusic");
    let isPlaying = false;
    musicIcon.addEventListener("click", () => {
      if (!isPlaying) { bgm.play(); isPlaying = true; }
      else { bgm.pause(); isPlaying = false; }
    });

    const subtitle = document.getElementById("subtitle");
    const hungrySound = document.getElementById("hungrySound");
    const eatSound = document.getElementById("eatSound");
    const bgPeace = document.getElementById("bgPeace");
    bgPeace.volume = 0.5;   // ğŸ”ˆ ì¡°ìš©í•œ ë°°ê²½ìŒ

    const eatScene = document.getElementById("eatScene");

    function showSubtitle(text, withNext = true) {
      subtitle.innerHTML = withNext
        ? `${text}<span class="next-indicator">ë‹¤ìŒ â–¶</span>`
        : text;
      subtitle.style.display = "block";
    }

    let hasEaten = false;
    let subtitleStep = 0;

    window.addEventListener("load", () => {
      setTimeout(() => showSubtitle("ì•„... ë°°ê³ íŒŒ.."), 2000);
    });

    // ===== ë°¥ë¨¹ê¸° ì‹œí€€ìŠ¤ =====
    subtitle.addEventListener("click", () => {
      if (!hasEaten && subtitle.innerText.includes("ë°°ê³ íŒŒ")) {
        nextSound.currentTime = 0;
        nextSound.play().catch(()=>{});

        hasEaten = true;
        subtitle.style.display = "none";
        hungrySound.currentTime = 0;
        hungrySound.play();

        setTimeout(() => {
          hungrySound.pause();
          eatSound.play();
          eatScene.classList.add("show");

          setTimeout(() => {
            eatScene.classList.remove("show");
            document.querySelector(".background").style.opacity = "0";

            const dirty = document.createElement("img");
            dirty.src = "./ë…¸ì•„ ë”ëŸ¬ì›€ 1.gif";
            dirty.className = "eat-scene show";
            dirty.style.cssText = `
              width:100%;height:100%;
              object-fit:contain;
              position:absolute;top:0;left:0;z-index:2;
              image-rendering:pixelated;
            `;
            document.querySelector(".stage").appendChild(dirty);

            showSubtitle("ì»´í“¨í„°ê°€ ì˜¤ë˜ë¼ì„œ ì¢€ ì´ìƒí•œ ê±° ê°™ì•„.", true);
            subtitleStep = 1;
          }, 3000);
        }, 2000);
      } else if (subtitleStep === 1) {
        nextSound.currentTime = 0;
        nextSound.play().catch(()=>{});

        showSubtitle("ê²Œì„ì´ë‚˜ í•´ì•¼ê² ë‹¤.", true);
        subtitleStep = 2;
      }
    });

    // ===== ì„±ì¸ì¸ì¦ì°½ =====
    const gameIcon = document.querySelector(".icon.game");
    let gameWindowShown = false;
    const gamePopup = document.createElement("div");
    Object.assign(gamePopup.style, {
      position: "fixed",
      top: "50%",
      left: "50%",
      transform: "translate(-50%, -50%)",
      width: "48.5%",
      background: "black",
      display: "none",
      zIndex: "9999",
      border: "0.5vh solid #000",    /* í…Œë‘ë¦¬ ë” ë‘ê»ê²Œ */
      borderRadius: "0",           /* ëª¨ì„œë¦¬ ì™„ì „ ë¾°ì¡±í•˜ê²Œ */
      imageRendering: "pixelated",
      padding: "0",
    });

    const popupImage = document.createElement("img");
    popupImage.src = "./ê²Œì„ì°½.png";
    popupImage.style.cssText = "width:48.5vw;display:block;image-rendering:pixelated;";
    gamePopup.appendChild(popupImage);

    const verifyBtn = document.createElement("button");
    
  verifyBtn.textContent = "ì¸ì¦í•˜ê¸°";
  verifyBtn.style.cssText = `
  font-family: 'DungGeunMo';
  font-size: 2.2vh;
  color: #fff;
  background: #b80000;
  border: 0.3vh solid #5a0000;
  border-top-color: #ff4d4d;
  border-left-color: #ff4d4d;
  box-shadow: inset -0.4vh -0.4vh 0 #7a0000, inset 0.4vh 0.4vh 0 #ff7a7a;
  padding: 1.5vh 0;
  cursor: pointer;
  width: 100%;
  margin: 0;
  display: block;
  transition: all 0.15s ease;
  image-rendering: pixelated;
`;

verifyBtn.onmouseenter = () => {
  verifyBtn.style.transform = "scale(1.03)";
  verifyBtn.style.background = "#ff0000";
};
verifyBtn.onmouseleave = () => {
  verifyBtn.style.transform = "scale(1)";
  verifyBtn.style.background = "#b80000";
};
  gamePopup.appendChild(verifyBtn)

    document.body.appendChild(gamePopup);

    gameIcon.addEventListener("click", () => {
      if (subtitleStep === 2 && !gameWindowShown) {
        nextSound.currentTime = 0;
        nextSound.play().catch(()=>{});

        subtitle.style.display = "none";
        gamePopup.style.display = "block";
        setTimeout(() => {
          showSubtitle("ì„±ì¸ì¸ì¦? ì›ë˜ ì´ëŸ° ê²Œ ìˆì—ˆë‚˜?", true);
          subtitleStep = 3;
        }, 800);
      }
    });

    subtitle.addEventListener("click", () => {
    if (subtitleStep === 3) {
      nextSound.currentTime = 0;
      nextSound.play().catch(()=>{});
      showSubtitle("ì—„ë§ˆ ì£¼ë¯¼ë“±ë¡ì¦ë§Œ ì ê¹ ê°€ì ¸ì˜¤ë©´ ë ê±°ê°™ì€ë°..?", false);

      const goText = document.createElement("span");
      goText.textContent = " ì—„ë§ˆë°© ê°€ê¸°";
      Object.assign(goText.style, {
        color: "#ffcc00",
        marginLeft: "1vw",
        cursor: "pointer",
        animation: "blink 1s infinite alternate",
      });
      subtitle.appendChild(goText);

      goText.addEventListener("click", () => {
  subtitle.style.display = "none";

  // ê²€ì€í™”ë©´ í˜ì´ë“œ
  const fadeOverlay = document.createElement("div");
  fadeOverlay.style.cssText = `
    position:fixed;top:0;left:0;width:100vw;height:100vh;
    background:black;opacity:0;transition:opacity 1s ease;z-index:10001;
  `;
  document.body.appendChild(fadeOverlay);

  // í™”ë©´ ì„œì„œíˆ ì–´ë‘ì›Œì§€ê¸°
  setTimeout(() => (fadeOverlay.style.opacity = "1"), 100);

  // ì‚¬ìš´ë“œ ì¬ìƒ: ë¬¸ ì—´ê¸° â†’ ë¬¸ ë‹«ê¸°
  const doorOpen = new Audio("./ë¬¸ì—´ê¸°.mp3");
  const doorClose = new Audio("./ë¬¸ë‹«ìŒ.mp3");
  doorOpen.volume = 0.8;
  doorClose.volume = 0.8;

  setTimeout(() => doorOpen.play(), 700);  // ë¬¸ì—´ê¸°
  setTimeout(() => doorClose.play(), 2300);  // ë¬¸ë‹«ê¸°

  // í˜ì´ì§€ ì´ë™: ì´ 4ì´ˆ ë’¤
  setTimeout(() => {
    window.location.href = "noah walk.html";
  }, 4000);
});


      subtitleStep = 4;
    }
  });
  document.addEventListener("click", () => {
  bgPeace.play().catch(()=>{});
}, { once: true });

  </script>
</body>
</html>

