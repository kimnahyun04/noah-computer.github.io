<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Noah's Mail Quest</title>

  <style>
    @font-face {
      font-family: 'DungGeunMo';
      src: url('./assets/fonts/DungGeunMo.ttf') format('truetype');
      font-display: swap;
    }

    html, body {
      margin: 0;
      width: 100vw;
      height: 100vh;
      background: #0b0f1a;
      overflow: hidden;
    }

    /* ============================
       16:9 ê³ ì • ê²Œì„ í™”ë©´
    ============================ */
    .game-container {
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #0b0f1a;
    }

    .game-area {
      position: relative;
      width: calc(100vh * (16 / 9)); /* 16:9 ê³ ì • */
      height: 100vh;
      max-width: 100vw;
      max-height: calc(100vw * (9 / 16));
      overflow: hidden;
      position: relative;
    }

    .stage {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .background {
      width: 100%;
      height: 100%;
      object-fit: contain;
      image-rendering: pixelated;
      position: absolute;
      z-index: 1;
    }

    /* ============================
       ì•„ì´ì½˜ (ë©”ì¼ í€˜ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ë™ì¼ ì ìš©)
    ============================ */
    .icon {
      position: absolute;
      width: 7%;
      image-rendering: pixelated;
      cursor: pointer;
      transition: transform 0.2s ease, filter 0.2s ease;
      filter: drop-shadow(-0.4vw -0.4vh 0 #131313);
      z-index: 5;
    }
    .icon:hover {
      transform: scale(1.1);
      filter: drop-shadow(0 0 0.6vw rgba(255,255,255,0.9));
    }

    .internet { top: 7%; left: 6%; }
    .mail { top: 20%; left: 6%; }
    .folder { top: 33%; left: 6%; }
    .trash { top: 46%; left: 6%; }
    .game { top: 59%; left: 5%; width: 9%; }
    .music-icon { top: 73%; left: 6%; }

    /* ============================
       ëˆˆì•Œ (ë©”ì¼ í€˜ ì™„ì „ ë™ì¼)
    ============================ */
    .eye-wrapper {
      position: absolute;
      width: 100%;
      top: -1vh;
      left: 0;
      pointer-events: none;
      z-index: 3;
    }
    .eye {
      width: 100%;
      height: auto;
      image-rendering: pixelated;
      transition: transform 0.05s linear;
    }

    /* ë°°ì§€ */
    .badge {
      position: absolute;
      min-width: 1.8vw;
      height: 1.8vw;
      border-radius: 50%;
      background: red;
      color: white;
      font-size: 1vw;
      text-align: center;
      line-height: 1.8vw;
      border: 2px solid white;
      display: none;
      z-index: 10;
    }

    /* ë©”ì‹œì§€ì°½ */
    #messageContainer {
      position: absolute;
      top: 10vh;
      right: 5vw;
      width: 30vw;
      display: none;
      border: 2px solid black;
      box-shadow: 10px 10px 0 rgba(0,0,0,0.9);
      z-index: 20;
    }
    #messageWindow { width: 100%; image-rendering: pixelated; }
    #closeBtn {
      position: absolute;
      top: 1vh;
      right: 0.5vw;
      width: 3vw;
      height: 3vh;
      cursor: pointer;
      z-index: 300;
    }
    #illegalMsg {
      position: absolute;
      top: -6vh;
      left: -5.6vw;
      width: 40vw;
      display: none;
      cursor: pointer;
      z-index: 25;
      image-rendering: pixelated;
    }
    #messageHeader {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3vh;
      cursor: move;
      z-index: 30;
    }

    /* ìë§‰ */
    #subtitle {
      position: fixed;
      bottom: 5vh;
      left: 50%;
      transform: translateX(-50%);
      padding: 1vh 2vw;
      background: rgba(0,0,0,0.6);
      border: 2px solid white;
      border-radius: 10px;
      text-align: center;
      color: white;
      font-size: 2.2vh;
      font-family: 'DungGeunMo';
      display: none;
      z-index: 1000;
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

    .next-indicator {
      margin-left: 1vw;
      color: #ffcc00;
      font-size: 1.8vh;
      animation: blink 1s infinite alternate;
    }
    @keyframes blink { from{opacity:.3;} to{opacity:1;} }
  </style>
</head>

<body>

<div class="game-container">
  <div class="game-area">
    <div class="stage">

      <img class="background" src="./ì›¹ë””ë°°ê²½.gif" />

      <!-- ì•„ì´ì½˜ -->
      <img class="icon internet" src="./ì¸í„°ë„· ë¡œê³ .png" />
      <img class="icon mail" src="./ë©”ì„¸ì§€ ì•„ì´ì½˜.png" />
      <img class="icon folder" src="./í´ë” ì•„ì´ì½˜.png" />
      <img class="icon trash" src="./ì“°ë ˆê¸°í†µ.png" />
      <img class="icon game" src="./ë¶ˆë²•ê²Œì„ ì•„ì´ì½˜.png" />
      <img class="icon music-icon" src="./ìŒì•…ì•„ì´ì½˜.png" />

      <!-- ëˆˆ -->
      <div class="eye-wrapper" id="eyeWrapper">
        <img class="eye" id="eye" src="./ëˆˆì•Œ.png" />
      </div>

    </div>
  </div>
</div>

<span id="badge" class="badge">1</span>
<div id="subtitle"></div>

<div id="messageContainer">
  <div id="messageHeader"></div>
  <img id="messageWindow" src="./ë©”ì„¸ì§€-ì°½.png" />
  <img id="illegalMsg" src="./ë©”ì„¸ì§€-ë§.png" />
  <div id="closeBtn"></div>
</div>

<audio id="nextSound" src="./ë‹¤ìŒ í´ë¦­.mp3" preload="auto"></audio>
<audio id="mailAlertSound" src="./ë©”ì„¸ì§€ ì•Œë¦¼ìŒ.mp3" preload="auto"></audio>
<audio id="bgPeace" src="./ë°°ê²½ìŒ.mp3" preload="auto" loop></audio>

<script>
/* ============================
   ğŸ‘ ëˆˆ ì›€ì§ì„ (ë©”ì¼ í€˜ìŠ¤íŠ¸ ë°©ì‹ ê·¸ëŒ€ë¡œ)
============================ */
const eye = document.getElementById("eye");
const eyeWrapper = document.getElementById("eyeWrapper");
const gameArea = document.querySelector(".game-area");

function updateEyePosition(e) {
  const rect = eyeWrapper.getBoundingClientRect();
  const centerX = rect.left + rect.width / 2;
  const centerY = rect.top + rect.height / 2;

  const dx = e.clientX - centerX;
  const dy = e.clientY - centerY;

  const maxMove = rect.width * 0.005;
  const moveX = Math.max(Math.min(dx / 20, maxMove), -maxMove);
  const moveY = Math.max(Math.min(dy / 20, maxMove), -maxMove);

  eye.style.transform = `translate(${moveX}px, ${moveY}px)`;
}

gameArea.addEventListener("mousemove", updateEyePosition);
window.addEventListener("resize", () => (eye.style.transform = "translate(0,0)"));

/* ============================
   ğŸ”Š ë°°ê²½ìŒ
============================ */
const bgPeace = document.getElementById("bgPeace");
bgPeace.volume = 0.2;
document.addEventListener("click", () => bgPeace.play(), { once: true });

/* ============================
   ìë§‰ & ë°°ì§€ (ë©”ì¼ í€˜ìŠ¤íŠ¸ ê·¸ëŒ€ë¡œ)
============================ */
const subtitle = document.getElementById("subtitle");
const nextSound = document.getElementById("nextSound");
const mailSound = document.getElementById("mailAlertSound");
const badge = document.getElementById("badge");
const mailIcon = document.querySelector(".icon.mail");

const subtitles = [
  "ë‚˜ì—ê²Œë„ ìƒˆ ì»´í“¨í„°ê°€...",
  "ë­ í•  ê±° ì—†ë‚˜...",
  "ë¬¸ìê°€ ì™”ë„¤, ëˆ„êµ¬ì§€?"
];

let subtitleStep = 0;

function showSubtitle(text, next = true) {
  subtitle.innerHTML = next ? `${text}<span class="next-indicator">ë‹¤ìŒ â–¶</span>` : text;
  subtitle.style.display = "block";
}

window.addEventListener("load", () => {
  setTimeout(() => showSubtitle(subtitles[0]), 3000);
});

subtitle.addEventListener("click", () => {
  nextSound.currentTime = 0;
  nextSound.play();

  subtitleStep++;

  if (subtitleStep < subtitles.length) {
    showSubtitle(subtitles[subtitleStep]);
  } else {
    subtitle.style.display = "none";
    showBadge();
  }
});

/* ë°°ì§€ í‘œì‹œ */
function showBadge() {
  const r1 = mailIcon.getBoundingClientRect();
  const r2 = gameArea.getBoundingClientRect();

  badge.style.left = ((r1.left - r2.left + r1.width) / window.innerWidth) * 100 - 2 + "vw";
  badge.style.top = ((r1.top - r2.top) / window.innerHeight) * 100 + "vh";
  badge.style.display = "block";

  mailSound.currentTime = 0;
  mailSound.play();
}

/* ============================
   ë©”ì‹œì§€ì°½
============================ */
const messageContainer = document.getElementById("messageContainer");
const illegalMsg = document.getElementById("illegalMsg");
const closeBtn = document.getElementById("closeBtn");

mailIcon.addEventListener("click", () => {
  messageContainer.style.display = "block";
  badge.style.display = "none";

  setTimeout(() => {
    illegalMsg.style.display = "block";
    showSubtitle("ë­ì•¼, í—¨ë¦¬ì–ì•„?", false);

    setTimeout(() => {
      showSubtitle("ì´ ë§í¬ëŠ” ë­ì§€? í´ë¦­í•´ ë´ì•¼ê² ë‹¤.", false);
    }, 2500);
  }, 1000);
});

illegalMsg.addEventListener("click", () => {
  window.location.href = "mail virus.html";
});

closeBtn.addEventListener("click", () => {
  messageContainer.style.display = "none";
});

/* ë“œë˜ê·¸ */
const header = document.getElementById("messageHeader");
let isDragging = false, offsetX=0, offsetY=0;

header.addEventListener("mousedown", e => {
  isDragging = true;
  offsetX = e.clientX - messageContainer.offsetLeft;
  offsetY = e.clientY - messageContainer.offsetTop;
});

document.addEventListener("mousemove", e => {
  if (isDragging) {
    messageContainer.style.left = (e.clientX - offsetX) + "px";
    messageContainer.style.top = (e.clientY - offsetY) + "px";
  }
});

document.addEventListener("mouseup", () => {
  isDragging = false;
});
</script>

</body>
</html>














