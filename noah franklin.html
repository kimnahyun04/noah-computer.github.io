<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
<title>Noahâ€™s Homework Virus â€” Franklin Quiz (Final)</title>
<link href="https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2107@1.0/DungGeunMo.css" rel="stylesheet">
<style>
html, body {
  margin: 0;
  width: 100vw;
  height: 100vh;
  background: #0b0f1a;
  overflow: hidden;
  image-rendering: pixelated;
}

/* ğŸ® 16:9 ê³ ì • ê²Œì„í™”ë©´ */
.game-container {
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #0b0f1a;
}

.game-area {
  position: relative;
  width: calc(100vh * (16 / 9)); /* ì„¸ë¡œ ê¸°ì¤€ */
  height: 100vh;

  max-width: 100vw; /* ê°€ë¡œ ê¸°ì¤€ ëŒ€ì‘ */
  max-height: calc(100vw * (9 / 16));

  overflow: hidden;
  position: relative;
}

.stage { 
  position: absolute; 
  width: 100%; 
  height: 100%; 
  top: 0; left: 0;
}

.background {
  position: absolute; width: 100%; height: 100%;
  object-fit: contain; top: 0; left: 0; z-index: 1;
}

.icon {
  position: absolute; 
  width: 7%;
  image-rendering: pixelated;
  transition: transform 0.2s ease, filter 0.2s ease;
  filter: drop-shadow(-0.4vw -0.4vh 0 #131313);
  cursor: pointer; z-index: 5;
}

.icon:hover { transform: scale(1.1); filter: drop-shadow(0 0 0.6vw rgba(255,255,255,0.9)); }

    .internet { top: 7%; left: 6%; }
    .mail { top: 20%; left: 6%; }
    .folder { top: 33%; left: 6%; }
    .trash { top: 46%; left: 6%; }
    .music-icon { top: 73%; left: 6%; }

/* ì„¤ì •ëœ ê³µê°„ ë‚´ì—ì„œ ì¤‘ì•™ì— ê³ ì •ëœ ë°˜ì‘í˜• ëˆˆì•Œ */
.eye-wrapper {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0; left: 0;
  pointer-events: none;
  z-index: 1;
}

.eye {
  width: 100%;
  height: auto;
  image-rendering: pixelated;
  transition: transform 0.05s linear;
}

.video-call {
  position: absolute; 
  top: 50%; 
  left: 50%; 
  transform: translate(-50%, -50%);
  width: 70%; 
  height: 70%; 
  background: #000; 
  border: 0.6vw solid #000;
  box-shadow: 0.4vw 0 #000; overflow: hidden; z-index: 3;
}

.call-inner {
  position: absolute; width: 100%; height: 100%;
  background: url('./í”„ë­í´ë¦° êµìˆ˜ ì˜í†µ.gif') center/contain no-repeat;
  transition: background 0.15s ease;
}

.dark-flash {
  position: absolute; top: 0; left: 0; width: 100%; height:100%;
  background:black; opacity:0; z-index:2.5; pointer-events:none;
  transition:opacity .3s ease;
}

#subtitle {
  position: absolute; bottom: 5vh; left: 50%; transform: translateX(-50%);
  font-family:'DungGeunMo'; color:#ffcc00; background:rgba(0,0,0,.6);
  border:.15vw solid white; padding:2vh 3vw; font-size:2.5vh; text-align:center;
  z-index:999999; display:none; animation:fadeIn .5s ease; max-width:90%;
  box-shadow:.25vw .25vw 0 #000;
}

#subtitle .next {
  font-size:2vh; margin-left:1vw; animation:blink 1s infinite alternate; cursor:pointer;
}

@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
@keyframes blink{0%{opacity:.5;}100%{opacity:1;}}

.choices {
  position:absolute; bottom:15vh; left:50%; transform:translateX(-50%);
  display:flex; gap:2vw; z-index:9999999;
}
.btn {
  background:#111; color:#ffcc00; border:.15vw solid #fff; font-family:'DungGeunMo';
  font-size:4vh; padding:1.5vh 3.5vw; cursor:pointer;
  transition:transform .1s; box-shadow:-.25vw -.25vw 0 #000;
}
.btn:hover { transform:scale(1.05); }

.glitch {
  animation: glitchFlash 0.12s steps(2) forwards;
}
@keyframes glitchFlash {
  0% { filter: contrast(3) brightness(3) saturate(8) hue-rotate(30deg); }
  50% { filter: contrast(0.5) brightness(0.3) saturate(0); transform: translate(2px, -2px); }
  100% { filter: none; transform: none; }
}
</style>
</head>
<body>

<div class="game-container">
  <div class="game-area">
    <div class="stage">
      <img class="background" src="./ë…¸ì•„ ê²Œì„ í›„ ë§ê°€ì§.gif" />
      <img class="icon internet" src="./ì¸í„°ë„· ë¡œê³ .png" />
      <img class="icon mail" src="./ë©”ì„¸ì§€ ì•„ì´ì½˜.png" />
      <img class="icon folder" src="./í´ë” ì•„ì´ì½˜.png" />
      <img class="icon trash" src="./ì“°ë ˆê¸°í†µ.png" />
      <img class="icon music-icon" src="./ìŒì•…ì•„ì´ì½˜.png" />

      <div class="eye-wrapper" id="eyeWrapper"><img class="eye" id="eye" src="./ëˆˆì•Œ.png" /></div>

      <div class="video-call">
        <div class="call-inner" id="callInner"></div>
        <div class="dark-flash" id="darkFlash"></div>
      </div>

      <div id="subtitle"></div>
      <div class="choices" id="choices"></div>
      <audio id="clickSound" src="./ë”¸ê¹.mp3"></audio>
      <audio id="nextSound" src="./ë‹¤ìŒ í´ë¦­.mp3"></audio>
      <audio id="bgm" src="./ë¬´ì„œìš´ ë°°ê²½ìŒ.mp3" loop></audio>
      <audio id="bgm2" src="./ê³µí¬ ë°°ê²½ìŒ 2.mp3" loop></audio>
      <audio id="screamSound" src="./êµìˆ˜ ì†Œë¦¬ì§€ë¦„.mp3"></audio>


    </div>
  </div>
</div>

<script>

const subtitle = document.getElementById("subtitle");
const callInner = document.getElementById("callInner");
const darkFlash = document.getElementById("darkFlash");
const choices = document.getElementById("choices");
const bgm = document.getElementById("bgm");
bgm.volume = 0.4; // ë„ˆë¬´ í¬ë©´ ë¬´ì„­ë‹¤ê¸°ë³´ë‹¤ ì§œì¦ë‚¨ (ê²½í—˜ë‹´)
const bgm2 = document.getElementById("bgm2");
bgm2.volume = 0.5;

const screamSound = document.getElementById("screamSound");
screamSound.volume = 1;

const nextSound = document.getElementById("nextSound");
nextSound.volume = 1;

function playScream() {
  screamSound.pause();
  screamSound.currentTime = 0;
  screamSound.play();
}

function playNext() {
  nextSound.pause();
  nextSound.currentTime = 0;
  nextSound.play();
}


const clickSound = new Audio("./ë”¸ê¹.mp3"); 
clickSound.preload = "auto";

window.addEventListener("click", () => {
  // í´ë¦­ ì‚¬ìš´ë“œ ì–¸ë½
  clickSound.volume = 0;
  clickSound.play().then(() => {
    clickSound.pause();
    clickSound.currentTime = 0;
    clickSound.volume = 1;
  }).catch(() => {});

  // ğŸµ ë°°ê²½ìŒ ì‹œì‘
  bgm.play().catch(() => {});
}, { once: true });


function playClick() {
  clickSound.pause();
  clickSound.currentTime = 0;
  clickSound.play();
}

const questions = [
  { q: "2+3=?", answers: ["4","5","6"], correct: 1 },
  { q: "6+2=?", answers: ["6","7","8"], correct: 2 },
  { q: "5+5=?", answers: ["10","11","12"], correct: 0 },
  { q: "49392423213+2921323123=?", answers: ["??","??","??"] },
  { q: "343Ã—28901-20283219=?", answers: ["??","??","??"] },
  { q: "?+?=?", answers: ["ë‚˜ë‘","33","44"] },
  { q: "2---2=?", answers: ["999","666","ê°™ì´"] },
  { q: "1234Ã—12=?", answers: ["ì»´í“¨í„°","15000","12000"] },
  { q: "999Ã—999=?", answers: ["100000","ì†ìœ¼ë¡œ","998001"] },
  { q: "32000Ã·4=?", answers: ["ë“¤ì–´ê°€ì","ã…‹ã…‹ã…‹","ã…‹ã…‹ã…‹"] },
  { q: "ì§€ê¸ˆ", answers: [] }
];

let current = 0;
let step = 0;
let franklinPhase = 0;

function setFranklin(p){
  const imgs = [
    "./í”„ë­í´ë¦° êµìˆ˜ ì˜í†µ.gif",
    "./í”„ë­í´ë¦° 1ë‹¨ê³„.gif",
    "./í”„ë­í´ë¦° 2ë‹¨ê³„.gif"
  ];

  // í™”ë©´ ë³€ì´
  callInner.classList.add("glitch");
  callInner.style.backgroundImage = `url('${imgs[p]}')`;

  // ğŸ˜± 1ë‹¨ê³„ / 2ë‹¨ê³„ ì§„ì… ì‹œ êµìˆ˜ ë¹„ëª…
  if (p === 1 || p === 2) {
    playScream();
  }

  // ğŸµ 1ë‹¨ê³„ ì§„ì… ì‹œ BGM ì™„ì „ êµì²´
  if (p === 1) {
    // âŒ ê¸°ì¡´ ê³µí¬ ë°°ê²½ìŒ ì™„ì „ ì¢…ë£Œ
    bgm.pause();
    bgm.currentTime = 0;

    // âœ… ê³µí¬ ë°°ê²½ìŒ 2 ì‹œì‘
    if (bgm2.paused) {
      bgm2.currentTime = 0;
      bgm2.play().catch(()=>{});
    }
  }

  setTimeout(()=>callInner.classList.remove("glitch"),300);
}



function showSubtitle(text,color="yellow",next=true){
  const t = (color==="noah")?"#fff":"#ffcc00";
  subtitle.innerHTML = `<span style="color:${t}">${text}</span>${next?`<span class="next">ë‹¤ìŒ â–¶</span>`:""}`;
  subtitle.style.display="block";
}

subtitle.addEventListener("click",e=>{
  if(!e.target.classList.contains("next")) return;

  playNext();

  if(step===0){showSubtitle("(ì´ ì‚¬ëŒì´ ìš°ë¦¬í•™êµ êµìˆ˜ë‹˜ì´ì…¨ë‚˜...? ë¶„ìœ„ê¸°ê°€ ì˜¤ì‹¹í•´)","noah");step=1;}
  else if(step===1){showSubtitle("ë„¤, êµìˆ˜ë‹˜.","noah");step=2;}
  else if(step===2){showSubtitle("ì¢‹ì•„. ê·¸ëŸ¼ ì²« ë²ˆì§¸ ë¬¸ì œë¶€í„° ì‹œì‘í•˜ì§€.");step=3;}
  else if(step===3){
    subtitle.style.display="none";
    showQuestion();
  }
});

function showQuestion(){
  const q = questions[current];

  if(current === questions.length-1){
    subtitle.style.display="none";
    choices.innerHTML="";
    choices.style.display="none";
    darkFlash.style.opacity="1";
    setTimeout(()=>location.href="./noah quest 4.html",1000);
    return;
  }

  showSubtitle(q.q,"",false);
  choices.innerHTML="";
  choices.style.display="flex";

  q.answers.forEach((a,i)=>{
    const btn=document.createElement("button");
    btn.textContent=a;
    btn.className="btn";
    btn.onclick=()=>{
      playClick(); // âœ… ì²« ë¬¸ì œë¶€í„° ì¦‰ì‹œ ë”¸ê¹!
      handleAnswer(i);
    };
    choices.appendChild(btn);
  });
}

function handleAnswer(i){
  const q = questions[current];
  darkFlash.style.opacity="1";

  if(current<3 && i===q.correct){
    showSubtitle("... ë‹¤ìŒ ë¬¸ì œë‹¤."); 
    darkFlash.style.opacity="0";
  } else {
    const correct = (typeof q.correct==="number" && i===q.correct);
    if(correct){
      showSubtitle("ìš´ì´ ì¢‹êµ°...");
      darkFlash.style.opacity="0";
    } else {
      showSubtitle("í‹€ë ¸ì–´...");
      darkFlash.style.opacity="0";

      if(current===3 && franklinPhase===0){
        franklinPhase=1;
        setTimeout(()=>setFranklin(1),120);
      }
      if(current===7 && franklinPhase===1){
        franklinPhase=2;
        setTimeout(()=>setFranklin(2),120);
      }
    }
  }

  setTimeout(()=>{
    current++;
    subtitle.style.display="none";
    showQuestion();
  },1200);
}

const eye = document.getElementById("eye");
const eyeWrapper = document.getElementById("eyeWrapper");

function updateEyePosition(e) {
      const rect = eyeWrapper.getBoundingClientRect();
      const cX = rect.left + rect.width / 2;
      const cY = rect.top + rect.height / 2;
      const dx = e.clientX - cX;
      const dy = e.clientY - cY;
      const max = rect.width * 0.005;
      const mx = Math.max(Math.min(dx / 20, max), -max);
      const my = Math.max(Math.min(dy / 20, max), -max);
      eye.style.transform = `translate(${mx}px, ${my}px)`;
    }
    window.addEventListener("mousemove", updateEyePosition);
    window.addEventListener("resize", () => eye.style.transform = "translate(0, 0)");

window.addEventListener("load",()=>{
  showSubtitle("ë…¸ì•„, ìˆ˜í•™ ë¬¸ì œ í’€ ì¤€ë¹„ê°€ ë˜ì—ˆë‹ˆ?");
});
</script>

</body>
</html>


















